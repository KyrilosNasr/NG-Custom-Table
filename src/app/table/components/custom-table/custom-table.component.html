<div class="d-flex align-items-center justify-content-around my-5">
  <!-- Drag and drop area -->
  <div class="drag-drop-area border border-danger p-3 w-50 text-center" (drop)="onDrop($event)"
    (dragover)="allowDrop($event)">
    Drag and drop here
  </div>

  <!-- Display removed column names as clickable elements -->
  <div *ngIf="removedColumns.length"
    class="removed-column d-flex justify-content-between align-items-center flex-column">
    <h2> Removed Columns</h2>
    <div class="d-flex align-items-center gap-3">
      <!-- Loop through removed columns and display them as clickable elements -->
      <div *ngFor="let item of removedColumns" class="pointer">
        <span class="bg-success rounded-pill px-3 d-flex align-items-center text-capitalize py-2 text-white"
          (click)="restoreColumn(item.name)">{{ item.name }} <i class="bi bi-x ms-2"></i></span>
      </div>
      <button class="btn btn-primary" (click)="restoreAllColumns()">Restore All <i
          class="bi bi-arrow-repeat"></i></button>
    </div>
  </div>
</div>

<table class="table table-hover table-striped">
  <!-- Table Header -->
  <thead>
    <tr>
      <th scope="col">
        <input class="form-check-input" type="checkbox" id="selectAllCheckbox" (change)="selectAll($event)"
          [checked]="areAllVisibleSelected()" [indeterminate]="areSomeVisibleSelected()">
      </th>
      <th></th>
      <!-- Iterate over columns -->
      <ng-container *ngFor="let column of columns">
        <th scope="col" [attr.data-column]="column.name" [class.sortable]="column.sortable"
          [draggable]="column.draggable" (dragstart)="onDragStart($event, column)"
          (click)="column.sortable !== false && sortData(column)">
          <span [class.pointer]="column.sortable" class="text-capitalize">{{ column.name }}</span>
          <span *ngIf="column.sortable && sortColumn === column.name">
            {{ sortDirection === 'asc' ? '↑' : '↓' }}
          </span>
        </th>
      </ng-container>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let ticket of paginatedData">
      <td>
        <input class="form-check-input" type="checkbox" [value]="ticket" [id]="'flexCheckDefault' + ticket.ticketNo"
          [checked]="isSelected(ticket)" (change)="selectTicket($event, ticket)">
      </td>
      <td>
        <div class="dropdown">
          <button class="btn" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-three-dots-vertical"></i>
          </button>
          <!-- Dropdown actions can be added here -->
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li class="pointer">
              <a class="dropdown-item d-flex align-items-center" (click)="accept(ticket)">
                <span class="text-primary">Accept</span>
              </a>
            </li>
            <li class="pointer">
              <a class="dropdown-item d-flex align-items-center" (click)="reject(ticket)">
                <span class="text-danger-emphasis">Reject</span>
              </a>
            </li>
            <li class="pointer">
              <a class="dropdown-item d-flex align-items-center" (click)="edit(ticket)">
                <span class="text-success">Edit</span>
              </a>
            </li>
            <li class="pointer">
              <a class="dropdown-item d-flex align-items-center" (click)="delete(ticket)">
                <span class="text-danger">Delete</span>
              </a>
            </li>
          </ul>
        </div>
      </td>
      <ng-container *ngFor="let column of columns">
        <td class="text-capitalize">{{ getTicketValue(ticket, column.name) | smartFormat }}</td>
      </ng-container>
    </tr>
  </tbody>
</table>

<div class="d-flex align-items-center justify-content-around flex-row mt-5">
  <nav *ngIf="data.length > paginationConfig.rowsPerPage">
    <ul class="pagination justify-content-center">
      <!-- Jump to First Page Button -->
      <li class="page-item" [class.disabled]="paginationConfig.currentPage === 1">
        <a class="page-link" href="#" (click)="jumpToFirstPage()" aria-label="First">
          <span aria-hidden="true">&laquo;&laquo;</span>
        </a>
      </li>
      <!-- Previous Page Button -->
      <li class="page-item" [class.disabled]="paginationConfig.currentPage === 1">
        <a class="page-link" href="#" (click)="onPageChange(paginationConfig.currentPage - 1)" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <!-- Page Numbers -->
      <li class="page-item" *ngFor="let page of pages" [class.active]="paginationConfig.currentPage === page">
        <a class="page-link" href="#" (click)="onPageChange(page)">{{ page }}</a>
      </li>
      <!-- Next Page Button -->
      <li class="page-item" [class.disabled]="paginationConfig.currentPage === totalPages">
        <a class="page-link" href="#" (click)="onPageChange(paginationConfig.currentPage + 1)" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      <!-- Jump to Last Page Button -->
      <li class="page-item" [class.disabled]="paginationConfig.currentPage === totalPages">
        <a class="page-link" href="#" (click)="jumpToLastPage()" aria-label="Last">
          <span aria-hidden="true">&raquo;&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="row w-25">
    <div class="col-md-6 d-flex flex-row gap-3 justify-content-around align-items-center w-100">
      <label for="rowsPerPage">Rows Per Page:</label>
      <select class="form-select w-50" id="rowsPerPage" [(ngModel)]="paginationConfig.rowsPerPage"
        (change)="onRowsPerPageChange()">
        <option *ngFor="let option of rowsPerPageOptions" [value]="option">{{ option }}</option>
      </select>
    </div>
  </div>
</div>